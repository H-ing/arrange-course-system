webpackJsonp([6],{gwFa:function(e,t){},p2Td:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("7t+N"),s=a.n(l),r={components:{},props:{},data:function(){return{addShow:!0,form:{taskName:"",grade:"高一",classCategory:"行政班",teachData:[{subject:"人数",Chinese:"173",Math:"500",English:"55",Physics:"752",Chemistry:"130",Biology:"50",Geography:"200",History:"150",sum:""}],studentData:[{subject:"人数",Chinese:"173",Math:"260",English:"55",Physics:"52",Chemistry:"30",Biology:"50",Geography:"00",History:"10",sum:""}],miniNums:"",maxNums:"",timeTable:[{section:"第1节课",time:{startTime:"07:00",endTime:"07:40"}}]}}},watch:{},computed:{taskLists:function(){return this.$store.state.taskLists}},methods:{getSum:function(e){var t=[];for(var a in e)t.push(parseInt(e[a]));t.pop(t.length-1),t.shift(1);var l=t.reduce(function(e,t){return e+t},0);e.sum=l;for(var r=s()("tbody").eq(2).find("tr"),i=0;i<r.length-1;i++)s()("tbody:eq(2) tr:eq("+i+") .cell:eq(2)").css("visibility","hidden")},goBack:function(){this.$router.go(-1)},deleteRow:function(e,t){t.splice(e,1);var a=s()(".time-table").find("tr").length-2;s()(".time-table tr:eq("+a+") .cell:eq(2)").css("visibility","visible")},addTime:function(e,t){var a=e.split(":"),l=parseInt(a[0]),s=parseInt(a[1])+t;if(s>=60){var r=s-60;s=r,r<60&&(l+=1)}return 1==l.toString().length&&(l="0"+l),1==s.toString().length&&(s="0"+s),l>=22&&s>=30?e:[l,s].join(":")},addTimeRow:function(){var e=s()(".time-table").find("tr").length-1,t=this.form.timeTable[e-1].time.endTime,a=this.addTime(t,55),l=this.addTime(a,45);if(a==t)alert("已超过最大时间，不能继续添加"),this.addShow=!1;else{var r={section:"第"+(e+1)+"节课",time:{startTime:a,endTime:l}};this.form.timeTable.push(r)}},submitForm:function(e,t){var a=this;0==this.$store.state.taskLists.filter(function(e){return e.taskName==t.taskName}).length?a.$store.commit("SET_List",t):a.$store.commit("UPDATE_List",t),a.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;a.$router.push({path:"@/views/RulesLists",name:"rulesLists",query:{form:a.form}})})}},created:function(){},mounted:function(){var e=this.$route.query,t=this.form.studentData[0],a=this.form.teachData[0];this.getSum(t),this.getSum(a);var l=this.$store.state.taskLists.filter(function(t){return t.taskName==e.taskName});0==l.length||(this.form=l[0]),this.form.taskName=e.taskName},updated:function(){}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"s-main"},[a("el-page-header",{staticClass:"back-head",attrs:{content:"设置分班规则"},on:{back:e.goBack}}),e._v(" "),a("div",{staticClass:"s-form"},[a("el-form",{ref:"form",staticClass:"form",attrs:{model:e.form,"label-width":"180px","label-position":"right"}},[a("el-form-item",{attrs:{label:"任务名称"}},[a("span",{staticClass:"task-name"},[e._v(e._s(e.form.taskName))])]),e._v(" "),a("el-form-item",{attrs:{label:"年级"}},[a("el-radio-group",{model:{value:e.form.grade,callback:function(t){e.$set(e.form,"grade",t)},expression:"form.grade"}},[a("el-radio",{attrs:{label:"高一"}}),e._v(" "),a("el-radio",{attrs:{label:"高二"}}),e._v(" "),a("el-radio",{attrs:{label:"高三"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"班类"}},[a("el-radio-group",{model:{value:e.form.classCategory,callback:function(t){e.$set(e.form,"classCategory",t)},expression:"form.classCategory"}},[a("el-radio",{attrs:{label:"行政班"}}),e._v(" "),a("el-radio",{attrs:{label:"教学班"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"学生选科人数"}},[a("el-table",{staticClass:"st-table",attrs:{data:e.form.studentData,border:"",size:"mini",id:"st-table","header-cell-style":{background:"#eef1f6",color:"#606266"}},model:{value:e.form.studentData,callback:function(t){e.$set(e.form,"studentData",t)},expression:"form.studentData"}},[a("el-table-column",{attrs:{prop:"subject",label:"科目",align:"center",width:"80px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"Chinese",label:"语文",align:"center",width:"80px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"Math",label:"数学",align:"center",width:"80px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"English",label:"英语",align:"center",width:"80px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"Physics",label:"物理",align:"center",width:"80px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"Chemistry",label:"化学",align:"center",width:"80px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"Biology",label:"生物",align:"center",width:"80px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"Geography",label:"地理",align:"center",width:"80px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"History",label:"历史",align:"center",width:"80px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"sum",label:"总计",align:"center",width:"80px"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"老师科目人数"}},[a("el-table",{staticClass:"st-table",attrs:{data:e.form.teachData,border:"",size:"mini",id:"st-table","header-cell-style":{background:"#eef1f6",color:"#606266"}},model:{value:e.form.teachData,callback:function(t){e.$set(e.form,"teachData",t)},expression:"form.teachData"}},[a("el-table-column",{attrs:{prop:"subject",label:"科目",align:"center",width:"80px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"Chinese",label:"语文",align:"center",width:"80px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"Math",label:"数学",align:"center",width:"80px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"English",label:"英语",align:"center",width:"80px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"Physics",label:"物理",align:"center",width:"80px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"Chemistry",label:"化学",align:"center",width:"80px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"Biology",label:"生物",align:"center",width:"80px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"Geography",label:"地理",align:"center",width:"80px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"History",label:"历史",align:"center",width:"80px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"sum",label:"总计",align:"center",width:"80px"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"班级最少人数",prop:"miniNums",rules:[{required:!0,message:"该空不能为空"},{type:"number",message:"该空必须为数字值"}]}},[a("el-input",{staticClass:"input",staticStyle:{width:"200px"},attrs:{type:"text",autocomplete:"off",maxlength:"3",placeholder:"请输入数字"},model:{value:e.form.miniNums,callback:function(t){e.$set(e.form,"miniNums",e._n(t))},expression:"form.miniNums"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"班级最多人数",prop:"maxNums",rules:[{required:!0,message:"该空不能为空"},{type:"number",message:"该空必须为数字值"}]}},[a("el-input",{staticClass:"input",staticStyle:{width:"200px"},attrs:{type:"text",autocomplete:"off",maxlength:"3",placeholder:"请输入数字"},model:{value:e.form.maxNums,callback:function(t){e.$set(e.form,"maxNums",e._n(t))},expression:"form.maxNums"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"课程时间设置"}},[a("el-table",{staticClass:"time-table",staticStyle:{width:"781px"},attrs:{data:e.form.timeTable,size:"mini","header-cell-style":{background:"#eef1f6",color:"#606266"}},model:{value:e.form.timeTable,callback:function(t){e.$set(e.form,"timeTable",t)},expression:"form.timeTable"}},[a("el-table-column",{attrs:{prop:"section",label:"",width:"180",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"time",label:"课程时间",width:"480",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-time-select",{attrs:{rules:[{required:!0,message:"该空不能为空"},{type:"number",message:"该空必须为数字值"}],placeholder:"起始时间","picker-options":{start:"06:00",step:"00:05",end:"22:30"}},model:{value:t.row.time.startTime,callback:function(a){e.$set(t.row.time,"startTime",a)},expression:"scope.row.time.startTime"}}),e._v(" "),a("el-time-select",{attrs:{placeholder:"结束时间","picker-options":{start:"06:00",step:"00:05",end:"22:30",minTime:t.row.time.startTime}},model:{value:t.row.time.endTime,callback:function(a){e.$set(t.row.time,"endTime",a)},expression:"scope.row.time.endTime"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(a){return a.preventDefault(),e.deleteRow(t.$index,e.form.timeTable)}}},[e._v("移除")])]}}])})],1),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.addShow,expression:"addShow"}],staticClass:"add-time-row",on:{click:e.addTimeRow}},[e._v("+")])],1),e._v(" "),a("el-form-item",[a("el-button",{staticClass:"save"},[e._v("保存")]),e._v(" "),a("el-button",{staticClass:"sub",attrs:{type:"primary"},on:{click:function(t){return e.submitForm("form",e.form)}}},[e._v("开始分班")])],1)],1)],1)],1)},staticRenderFns:[]};var o=a("VU/8")(r,i,!1,function(e){a("gwFa")},"data-v-8024cac2",null);t.default=o.exports}});
//# sourceMappingURL=6.12caa07e0f36911fab7e.js.map